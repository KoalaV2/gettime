var week,urlArguments={},day=initDay,darkmode=initDarkMode,hideNavbar=initHideNavbar,oldURL="",school=initSchool;function toggleDarkMode(e=!1,t=!0,o=!0){let a="",s="";function n(){var e=document.getElementById("darkmode"),t=document.getElementById("darkmodeAll");"off"==e.getAttribute("href")?(e.setAttribute("href",a),t.setAttribute("href",s)):(e.setAttribute("href","off"),t.setAttribute("href","off"))}ignorecssmin?(s="/static/css/darkmode-all.css",a=mobileRequest?"/static/css/darkmode-mobile.css":"/static/css/darkmode-desktop.css"):(s="/static/css/min/darkmode-all.min.css",a=mobileRequest?"/static/css/min/darkmode-mobile.min.css":"/static/css/min/darkmode-desktop.min.css"),darkmode=$("#input-darkmode").prop("checked"),t&&createCookie("darkmode",darkmode?"1":"0",365),e?(n(),o&&updateTimetable()):($(".loader-main").slideToggle(500,function(){n(),o&&updateTimetable()}),$(".loader-main").slideToggle(500))}function inputExceeded(){var e=$("#id-input-box"),t=$("<span >"+e.val()+"</span>");t.css({position:"absolute",left:-9999,top:-9999,"font-family":e.css("font-family"),"font-size":e.css("font-size"),"font-weight":e.css("font-weight"),"font-style":e.css("font-style")}),$("body").append(t);var o=t.width()>e.width();return t.remove(),o}var lastKnownID="ඞ";function checkIfIDTextFits(){var e=$("#id-input-box");if(e.val()!=lastKnownID||inputExceeded()){if(inputExceeded())for(;inputExceeded();){if((t=parseInt(e.css("--font-size"),10)-1)<1)break;e.css({"font-size":"min("+t+"px,24px)","--font-size":t+"px"})}else for(;!inputExceeded();){var t;if((t=parseInt(e.css("--font-size"),10)+1)>24)break;e.css({"font-size":"min("+t+"px,24px)","--font-size":t+"px"})}lastKnownID=e.val()}}function showSaved(){$("#scheduleBox").addClass("menuBgBlur"),$(".menuIcon").removeClass("fa-bars").addClass("fa-times"),$(".savedList").empty(),$(".savedList").append("<li class='savedItems'>Tryck på länkarna för att ta bort dom</li>"),savedItems=getAllCookieNamesThatStartWith("URL_");for(var e=savedItems.length-1;e>=0;e--)savedItems[e].length>0&&$(".savedList").append('<li class="savedItems" onclick="eraseCookie(\''+savedItems[e]+"');showSaved();\">"+savedItems[e].replace("URL_","")+"</li>");console.log($(".savedList")),1==$(".savedItems").length?($(".savedList").empty(),$(".savedList").append("<li class='savedItems'>Du har inte sparat något URL</li>")):$(".savedList").append('<button class="clearSavedItems mobileSaved control-container" onclick="deleteAllURLCookies();">Ta bort alla</button>'),$(".savedIDs").fadeIn("fast")}function textBoxOpen(e){hideControls(),$(e).fadeIn(),$(".navbar").fadeOut(),$("#scheduleBox").fadeOut()}function textBoxClose(e){$(e).fadeOut(),$(".navbar").fadeIn(),$("#scheduleBox").fadeIn()}function savedItemClicked(e){$("#id-input-box").val(e.text()),$(".savedIDs").fadeOut("fast"),console.log("save inputed item in box"),updateTimetable()}function hideControls(){$(".controls").slideUp("fast",function(){$(this).is(":visible")?($(this).css("display","flex"),$("#scheduleBox").addClass("menuBgBlur"),$(".menuIcon").removeClass("fa-bars").addClass("fa-times")):($("#scheduleBox").removeClass("menuBgBlur"),$(".menuIcon").removeClass("fa-times").addClass("fa-bars"))})}function showControls(){updateMenuButtonsBasedOnSize(),$(".controls").slideToggle("fast",function(){$(".controls-container").fadeIn(0),$(this).is(":visible")?($(this).css("display","flex"),$("#scheduleBox").addClass("menuBgBlur"),$(".menuIcon").removeClass("fa-bars").addClass("fa-times")):($("#scheduleBox").removeClass("menuBgBlur"),$(".menuIcon").removeClass("fa-times").addClass("fa-bars"))})}function updateClipboard(e){navigator.clipboard.writeText(e).then(function(){console.log("YES")},function(){console.log("NO")})}function getShareableURL(){return send_API_request(requestURL+"API/SHAREABLE_URL?id="+$("#id-input-box").val()+"&school="+encodeURI(school)).result}function updateMenuButtonsBasedOnSize(){window.innerWidth<450?($("#button-text-day").html("Visa dag"),$("#button-text-qr").html("QR kod"),$("#button-text-private").html("Privat länk"),$("#button-text-copy").html("Kopiera länk"),$("#button-text-saved").html("Länkar")):($("#button-text-day").html("Visa bara dag&nbsp;&nbsp;"),$("#button-text-qr").html("Skapa QR kod&nbsp;&nbsp;"),$("#button-text-private").html("Skapa privat länk&nbsp;&nbsp;"),$("#button-text-copy").html("Kopiera privat länk&nbsp;&nbsp;"),$("#button-text-saved").html("Sparade länkar&nbsp;&nbsp;"))}function clickOn_QRCODE(){$("#button-text-qr").text("Laddar...");try{window.location.href=requestURL+"API/QR_CODE?id="+(privateURL?getShareableURL().id+"&p=1":$("#id-input-box").val()+"&p=0")}catch{$("#button-text-qr").text("ERROR!")}}function clickOn_SAVEDLINKS(){showSaved(),$(".controls-container").fadeOut(0)}function f_showNavbar(){console.log("Showing navbar"),hideNavbar=!1,$(".navbar").show(),$("#scheduleBox").css({top:$(".navbar").height()+"px"}),updateTimetable()}function f_hideNavbar(){console.log("Hiding navbar"),hideNavbar=!0,$(".navbar").hide(),$("#scheduleBox").css({top:"0px"}),updateTimetable()}function schoolSelected(e){school=e,createCookie("school",e,365),textBoxClose("#text_school_selector"),$("#school-select-box").val(school),updateTimetable()}$(window).on("load",function(){if(autoReloadSchedule){var e=new Date;setInterval(function(){0==(new Date).getHours()&&new Date-e>54e5&&location.reload()},1e4)}if(null==initDarkMode&&(darkmode=null!=readCookie("darkmode")&&"1"==readCookie("darkmode")),darkmode||toggleDarkMode(disableAnimation=!0,saveToCookie=!1,updateTimeTableAfter=!1),$("#input-darkmode").prop("checked",darkmode),privateURL&&$("#id-input-box").css("display","none"),""!=initSchool)school=initSchool,$("#school-select-box").val(school);else{let e=readCookie("school");isNaN(e)||null==e?(ignorecookiepolicy||"closed"==readCookie("infoClosed"))&&textBoxOpen("#text_school_selector"):(school=e,$("#school-select-box").val(school))}$(".text_box").hide(),hideControls(),$(".savedIDs").fadeOut(0),$("#input-day").prop("checked",initDayMode),$("#id-input-box").val(""==initID?readCookie("idnumber"):initID),checkIfIDTextFits(),ignorecookiepolicy||"closed"==readCookie("infoClosed")||textBoxOpen("#text_cookies_info"),week=initWeek,$(".input-week").val(week),$(".arrow-center-text").text(week),$(".arrow-center").attr("title","Current week ("+week+")"),showContactOnLoad&&textBoxOpen("#text_contact_info"),("closed"==readCookie("infoClosed")||ignorecookiepolicy)&&(console.log("load timetable after cookie info get"),updateTimetable()),hideNavbar&&f_hideNavbar(),$(".loader-main").slideToggle(),console.log("script.js is done")}),$(document).ready(function(){mobileRequest||$(".input-idnumber").width(`calc(calc(100vw - 215px) - ${$("#school-select-box").width()}px)`),$("#scheduleBox").css("top","50px")});