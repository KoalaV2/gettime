function updateScheduleHTML(e,o=!1,t=!1){if(!t){let t=document.getElementById("schedule"),s=t.parentNode;s.removeChild(t),o?(s.innerHTML='<p id="schedule" class="errorMessage">'+e+"</p>"+s.innerHTML,$("#scheduleBox").addClass("errorBox")):(s.innerHTML=e+s.innerHTML,$("#scheduleBox").removeClass("errorBox"))}$("#schedule").fadeOut(0),$("#schedule").fadeIn(500),$("#schedule").css({transform:"none",opacity:1}),$("#background-roller").fadeOut("fast"),$(".arrow").removeClass("arrow-loading")}function updateTimetable(e,o=!1){if(console.log("updateTimetable was excecuted. "+o),"closed"!=readCookie("infoClosed")){if(!ignorecookiepolicy)return void console.log("infoClosed was not closed yet! (Cookies not accepted)");console.log("infoClosed was not closed yet, but ignorecookiepolicy was true.")}if(isNaN(school)||null==school||""==school||"null"==school)return console.log("School not set!"),void textBoxOpen("#text_school_selector");let t="",s=$("#id-input-box").val();for(i in range(s.length)){let e=s.charAt(i);"<>/!@#$%^&*()=".includes(e)||(t+=e)}if($("#id-input-box").val(t),checkIfIDTextFits(),width=$(window).width()+6,height=window.innerHeight+2,height-=$(".navbar").height(),t.length>0&&$("#background-roller").fadeIn("fast"),savePosition=$(".savebutton").offset(),width>820?($(".savedIDs").css("right",0),$(".savedIDs").css("top",50),$(".savedIDs").css("transform","none")):($(".savedIDs").css("left","auto"),$(".savedIDs").css("top","auto"),$(".savedIDs").css("transform","none")),"its dangerous to go alone"!=t.toLowerCase())if("sus"!=t.toLowerCase()&&"ඞ"!=t.toLowerCase()){if(t.length>0){let e=requestURL+"API/GENERATE_HTML?id="+encodeURI(t)+"&day="+($("#input-day").is(":checked")?day:0)+"&week="+week+"&width="+width+"&height="+height+"&privateID="+(privateURL?"1":"0")+"&darkmode="+(darkmode?"1":"0")+"&darkmodesetting="+darkModeSetting+"&isMobile="+(mobileRequest?"1":"0")+"&school="+encodeURI(school);if(!o){if(e==oldURL)return console.log("URL and oldURL matched. Canceling..."),void updateScheduleHTML("",justTheEnd=!0);oldURL=e}console.log("Requesting schedule with "+(privateURL?"private ID...":"this url : "+e));let s=send_API_request(e);if(null==s.result.html||s.result.html.startsWith("\x3c!-- ERROR --\x3e")){if(null==s.result.html)var l="No response from sever (GetTime eller Skola24 ligger nere)";else{l=s.result.data.message;console.log("\x3c!-- ERROR --\x3e Found in response!")}console.log(l),updateScheduleHTML(l,l=!0)}else saveIdToCookie?(createCookie("idnumber",t,360),console.log("Saved ID to cookie")):console.log("Did not save ID to cookie, because saveIdToCookie is false"),updateScheduleHTML(s.result.html);$(".arrow-center-text").text(week)}else updateScheduleHTML("Inget ID skrivit",l=!0),console.log("updateTimetable did not run (ID was less then 1 lenght)");try{e()}catch{}}else window.location.href=requestURL+"ඞ";else textBoxOpen("#text_tricks")}